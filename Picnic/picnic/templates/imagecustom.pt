<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" xmlns:tal="http://xml.zope.org/namespaces/tal">
<head>
<Title></Title>
<link rel="stylesheet" href="${request.static_path('picnic:static/imagecustom.css')}" type="text/css" media="screen" charset="utf-8" />
<style type="text/css">.radiolink A:link {color: #000000; text-decoration: none} .radiolink A:visited {text-decoration: none} .radiolink A:active {text-decoration: none} .radiolink A:hover {text-decoration: underline;}</style>
 <script type="text/javascript">
function toggleCheckbox(name){
  var itemlist = document.forms['jsonform'];
  var cb=itemlist[name];
  cb.checked=!cb.checked;
}
</script>
</head>
<body>
<FORM ACTION="${req.current_route_path()}" METHOD="POST" enctype="multipart/form-data" id='newfile'>
<INPUT TYPE="HIDDEN" NAME="subpath" value="${subpath}"/>
Update my own file:<INPUT TYPE="FILE" name="source" size="40"/>
<INPUT TYPE="SUBMIT" VALUE="Edit..."/>
</FORM>
<FORM ACTION="${req.route_path('generatejson')}" METHOD="POST" id='jsonform'>
<INPUT TYPE="HIDDEN" NAME="jsonprefix" VALUE="${jsonprefix}"/>
<INPUT TYPE="HIDDEN" NAME="file" VALUE="${file}"/>
<INPUT TYPE="HIDDEN" NAME="subpath" VALUE="${subpath}"/>
<INPUT TYPE="HIDDEN" NAME="original_content" VALUE="${original_content}"/>
<div tal:repeat="figname sort(json.keys())" class="entry">
  <table  tal:condition="(not isinstance(json[figname],dict) or ('enable' not in json[figname] and subpath=='display_defaults') or subpath!='display_defaults') and not figname.startswith('#')" class="parameter">
    <tbody>
      <tr tal:condition="not isinstance(json[figname],dict) and not isinstance(json[figname],list)">
        <td class="parameter_title">Parameter ${figname}:</td>
        <td>
          <input type="text" name="${jsonprefix}.${figname}" value="${json[figname]}"/>
        </td>
      </tr>
      <tr tal:condition="isinstance(json[figname],list)">
        <td class="parameter_title">Parameter Series ${figname}:</td>
        <td>
          <input tal:repeat="x range(0,len(json[figname]))" type="text" name="${jsonprefix}.${figname}[${x}]" value="${json[figname][x]}"/>
        </td>
      </tr>
       <tr tal:condition="isinstance(json[figname],dict)">
        <td class="parameter_title" colspan="5">Parameter Set ${figname}:
          <span tal:condition="'enable' in json[figname]">
            <input type="checkbox" name="${jsonprefix}.${figname}.enable" checked="${json[figname].enable!=0}"/><span class="radiolink"><a href="javascript: toggleCheckbox('${jsonprefix}.${figname}.enable')">enable</a></span>
          </span>
        </td>
       </tr>
       <tr tal:condition="isinstance(json[figname],dict)">
        <td tal:repeat="field sort(json[figname].keys())" >
          <span tal:omit-tag="True" tal:condition="not field.startswith('#') and field not in ('parameters','doc','docs','enable')">
            ${field}:<input type="text" name="${jsonprefix}.${figname}.${field}" value="${json[figname][field]}"/>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
  <table  tal:condition="isinstance(json[figname],dict) and 'enable' in json[figname] and subpath=='display_defaults'" class="figure" >
    <tbody>
      <tr>
        <td class="figure_title">
          <input type="checkbox" name="${jsonprefix}.${figname}.enable" checked="${json[figname].enable!=0}"/><span class="radiolink"><a href="javascript: toggleCheckbox('${jsonprefix}.${figname}.enable')">Figure: ${figname}</a></span>
        </td>
      </tr>
      <tr tal:condition="'x max' in json[figname] or 'x min' in json[figname]" >
        <td>
          <span tal:condition="'x min' in json[figname]">
            X Min:
            <input type="text" name="${jsonprefix}.${figname}.x min" value="${json[figname]['x min']}"/>
          </span>
          <span tal:condition="'x max' in json[figname]">
            X Max:
            <input type="text" name="${jsonprefix}.${figname}.x max" value="${json[figname]['x max']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'y max' in json[figname] or 'y min' in json[figname]" >
        <td>
         <span tal:condition="'y min' in json[figname]">
            Y Min:
            <input type="text" name="${jsonprefix}.${figname}.y min" value="${json[figname]['y min']}"/>
          </span>
          <span tal:condition="'y max' in json[figname]">
            Y Max:
            <input type="text" name="${jsonprefix}.${figname}.y max" value="${json[figname]['y max']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'lo_color_lmt' in json[figname] or 'hi_color_lmt' in json[figname]" >
        <td>
         <span tal:condition="'lo_color_lmt' in json[figname]">
            Color Min:
            <input type="text" name="${jsonprefix}.${figname}.lo_color_lmt" value="${json[figname]['lo_color_lmt']}"/>
          </span>
          <span tal:condition="'hi_color_lmt' in json[figname]">
            Color Max:
            <input type="text" name="${jsonprefix}.${figname}.hi_color_lmt" value="${json[figname]['hi_color_lmt']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'number_xbins' in json[figname] or 'number_ybins' in json[figname]" >
        <td>
          Histogram Bin Counts:
          <span tal:condition="'number_xbins' in json[figname]">
            X
            <input type="text" name="${jsonprefix}.${figname}.number_xbins" value="${json[figname]['number_xbins']}"/>
          </span>
          <span tal:condition="'number_ybins' in json[figname]">
            Y
            <input type="text" name="${jsonprefix}.${figname}.number_ybins" value="${json[figname]['number_ybins']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'log_linear' in json[figname]" >
        <td>
          Scale:
          <select name="${jsonprefix}.${figname}.log_linear">
            <option value="log" tal:attributes="selected json[figname].log_linear=='log'">Log</option>
            <option value="linear" tal:attributes="selected json[figname].log_linear=='linear'">Linear</option>
          </select>
        </td>
      </tr>
      <tr tal:condition="'x_log_linear' in json[figname]" >
        <td>
          X Scale:
          <select name="${jsonprefix}.${figname}.x_log_linear">
            <option value="log" tal:attributes="selected json[figname].x_log_linear=='log'">Log</option>
            <option value="linear" tal:attributes="selected json[figname].x_log_linear=='linear'">Linear</option>
          </select>
        </td>
      </tr>
     <tr tal:condition="'y_log_linear' in json[figname]" >
        <td>
          Y Scale:
          <select name="${jsonprefix}.${figname}.y_log_linear">
            <option value="log" tal:attributes="selected json[figname].y_log_linear=='log'">Log</option>
            <option value="linear" tal:attributes="selected json[figname].y_log_linear=='linear'">Linear</option>
          </select>
        </td>
      </tr>
      <tr tal:condition="'color_log_linear' in json[figname]" >
        <td>
          Color Scale:
          <select name="${jsonprefix}.${figname}.color_log_linear">
            <option value="log" tal:attributes="selected json[figname].color_log_linear=='log'">Log</option>
            <option value="linear" tal:attributes="selected json[figname].color_log_linear=='linear'">Linear</option>
          </select>
        </td>
      </tr>
      <tr tal:condition="'mol_lost_level' in json[figname]" >
        <td>
         <span tal:condition="'mol_lost_level' in json[figname]">
            Color Min:
            <input type="text" name="${jsonprefix}.${figname}.mol_lost_level" value="${json[figname]['mol_lost_level']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'high' in json[figname]" >
        <td>
         <span tal:condition="'high' in json[figname]">
            Highest Value:
            <input type="text" name="${jsonprefix}.${figname}.high" value="${json[figname]['high']}"/>
          </span>
        </td>
      </tr>
      <tr tal:condition="'max alt(km)' in json[figname]" >
        <td>
         <span tal:condition="'max alt(km)' in json[figname]">
            Alt Max:
            <input type="text" name="${jsonprefix}.${figname}.max alt(km)" value="${json[figname]['max alt(km)']}"/>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<INPUT TYPE="SUBMIT" VALUE="Submit"/>
</FORM>
</body>
</html>
